<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ドライブスポットファインダー</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <h1>🚗 ドライブスポットファインダー</h1>
            <p>現在地から素敵なドライブスポットを見つけよう</p>
        </header>

        <div class="main-content">
            <div class="map-container">
                <div id="map"></div>
            </div>

            <div class="sidebar">
                <div class="location-info">
                    <h2>📍 現在地</h2>
                    <p id="current-location">位置情報を取得中...</p>
                    <button id="refresh-location" class="btn btn-primary">
                        🔄 位置を取得
                    </button>
                    
                    <div class="manual-location">
                        <p class="section-label">手動で位置を設定:</p>
                        <div class="location-inputs">
                            <input type="number" id="manual-lat" step="any" placeholder="緯度 (35.6762)" value="35.6762">
                            <input type="number" id="manual-lng" step="any" placeholder="経度 (139.6503)" value="139.6503">
                        </div>
                        <button id="set-location-btn" class="btn btn-secondary">位置を設定</button>
                    </div>
                </div>

                <div class="search-section">
                    <h2>🔍 スポット自動収集</h2>
                    <div class="search-options">
                        <label>検索範囲:</label>
                        <select id="search-radius">
                            <option value="5000">5 km</option>
                            <option value="10000">10 km</option>
                            <option value="20000" selected>20 km</option>
                            <option value="30000">30 km</option>
                            <option value="50000">50 km</option>
                            <option value="75000">75 km</option>
                            <option value="100000">100 km</option>
                        </select>
                    </div>
                    <button id="search-spots-btn" class="btn btn-success">
                        🔍 周辺スポットを自動収集
                    </button>
                    <p class="search-hint">展望台・観光地・飲食店・休憩所等を自動で収集します</p>
                </div>

                <div class="category-filter">
                    <h2>🏷️ カテゴリ</h2>
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-category="all">すべて</button>
                        <button class="filter-btn" data-category="drive">🛣️ ドライブ</button>
                        <button class="filter-btn" data-category="restaurant">🍽️ 食事</button>
                        <button class="filter-btn" data-category="rest">☕ 休憩</button>
                    </div>
                </div>

                <div class="spots-list">
                    <h2>📌 スポット一覧</h2>
                    <div id="spots-container">
                        <p class="loading">スポットを読み込み中...</p>
                    </div>
                </div>

                <div class="add-spot-section">
                    <h2>➕ スポットを追加</h2>
                    <button id="add-spot-btn" class="btn btn-success">
                        新しいスポットを手動追加
                    </button>
                    <button id="clear-spots-btn" class="btn btn-danger-outline">
                        🗑️ 全スポットを削除
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Spot Modal -->
    <div id="add-spot-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>新しいスポットを追加</h2>
            <form id="add-spot-form">
                <div class="form-group">
                    <label for="spot-name">スポット名 *</label>
                    <input type="text" id="spot-name" required>
                </div>
                <div class="form-group">
                    <label for="spot-category">カテゴリ *</label>
                    <select id="spot-category" required>
                        <option value="drive">🛣️ ドライブスポット</option>
                        <option value="restaurant">🍽️ レストラン・食事処</option>
                        <option value="rest">☕ 休憩スポット</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="spot-description">説明</label>
                    <textarea id="spot-description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="spot-address">住所</label>
                    <input type="text" id="spot-address">
                </div>
                <div class="form-group location-picker">
                    <label>位置 *</label>
                    <div class="coordinates">
                        <input type="number" id="spot-lat" step="any" placeholder="緯度" required>
                        <input type="number" id="spot-lng" step="any" placeholder="経度" required>
                    </div>
                    <button type="button" id="use-current-location" class="btn btn-secondary">
                        現在地を使用
                    </button>
                    <button type="button" id="pick-on-map" class="btn btn-secondary">
                        地図で選択
                    </button>
                </div>
                <div class="form-group">
                    <label for="spot-rating">評価 (0-5)</label>
                    <input type="number" id="spot-rating" min="0" max="5" step="0.5" value="0">
                </div>
                <button type="submit" class="btn btn-primary">追加する</button>
            </form>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="/static/app.js"></script>
</body>
</html>
